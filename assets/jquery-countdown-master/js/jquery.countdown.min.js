/*
 * jquery-countdown plugin
 *
 * Copyright (c) 2009 Martin Conte Mac Donell <Reflejo@gmail.com>
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 *
 * Forked by Lito in Github
 * https://github.com/eusonlito/jquery-countdown
 */
jQuery.fn.countdown=function(a){var b={stepTime:60,format:"dd:hh:mm:ss",startTime:"01:12:32:55",digitImages:6,digitWidth:67,digitHeight:90,timerEnd:function(){},image:"digits.png",continuous:!1},c=[],d=[],e=function(a){for(var d=0,e=0;e<b.startTime.length;e++){if(parseInt(b.startTime[e])>=0){if(elem=$('<div id="cnt_'+d+'" class="cntDigit" />').css({height:b.digitHeight,"float":"left",background:"url('"+b.image+"')",width:b.digitWidth}),elem.current=parseInt(b.startTime[e]),c.push(elem),f(d,-elem.current*b.digitHeight*b.digitImages),b.continuous===!0)c[d]._max=function(){return 9};else switch(b.format[e]){case"h":c[d]._max=function(a,b){return 0==a%2?2:b?3:9};break;case"d":c[d]._max=function(){return 9};break;case"m":case"s":c[d]._max=function(a){return 0==a%2?5:9}}++d}else elem=$('<div class="cntSeparator"/>').css({"float":"left"}).text(b.startTime[e]);a.append(elem)}},f=function(a,b){return void 0!==b?(c[a].margin=b,c[a].css({backgroundPosition:"0 "+b+"px"})):c[a].margin||0},g=function(a,e,g){d[a]&&window.clearInterval(d[a]);var h=-(b.digitHeight*b.digitImages*c[a].current);f(a,h),c[a].current=c[a].current+(g?e:-e);var i=0;d[a]=setInterval(function(){if(i++===b.digitImages*e)return window.clearInterval(d[a]),delete d[a],void 0;var c=g?-b.digitHeight:b.digitHeight;f(a,h+i*c)},b.stepTime/e)},h=function(a){if(0!=c[a].current)g(a,1);else if(a>0){var e=0==c[a-1].current;g(a,c[a]._max(a,e),!0),h(a-1)}else{for(var i=0;i<c.length;i++)clearInterval(d[i]),clearInterval(d.main),f(i,0);b.timerEnd()}},i=function(a){return(1e15+""+a).substr(-2)},j=function(c){var d=a.format||b.format,e={d:c.getDate(),h:c.getHours(),m:c.getMinutes(),s:c.getSeconds()};return d.replace(/(dd|hh|mm|ss)/g,function(a,b){return i(e[b[0]])})},k=function(c){var j,k,d=new Date,e=d.getDate(),f=d.getMonth()+1,g=d.getFullYear(),h=d.getHours(),l=a.format||b.format,m=c.split(":");return 0==l.indexOf("dd")&&(e=m[0],m=m.slice(1),l=l.substr(3)),0==l.indexOf("hh")&&(h=m[0],m=m.slice(1),l=l.substr(3)),0==l.indexOf("mm")&&(j=m[0],m=m.slice(1),l=l.substr(3)),0==l.indexOf("ss")&&(k=m[0],m=m.slice(1),l=l.substr(3)),new Date([f,e,g].join("/")+" "+[h,j,k].map(i).join(":")+" GMT-0900")};if(a.endTime){var l=a.endTime instanceof Date?a.endTime:k(a.endTime),m=l.getTime()-(new Date).getTime();a.startTime=j(new Date(m)),delete a.endTime}$.extend(b,a),e(this),d.main=setInterval(function(){h(c.length-1)},1e3)};